

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>API &mdash; SuPA  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=5929fcd5"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Changelog" href="changelog.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            SuPA
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="backend.html">Backend</a></li>
<li class="toctree-l1"><a class="reference internal" href="development.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#supa">supa</a></li>
<li class="toctree-l2"><a class="reference internal" href="#supa-const">supa.const</a></li>
<li class="toctree-l2"><a class="reference internal" href="#supa-main">supa.main</a></li>
<li class="toctree-l2"><a class="reference internal" href="#supa-db-session">supa.db.session</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-supa.db.model">supa.db.model</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#surrogate-keys-versus-natural-keys">Surrogate keys versus natural keys</a></li>
<li class="toctree-l3"><a class="reference internal" href="#connection-ids">Connection IDs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sqlalchemy-model-dependency-diagram">SQLAlchemy Model Dependency Diagram</a></li>
<li class="toctree-l3"><a class="reference internal" href="#supa.db.model.Uuid"><code class="docutils literal notranslate"><span class="pre">Uuid</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#supa.db.model.Uuid.cache_ok"><code class="docutils literal notranslate"><span class="pre">Uuid.cache_ok</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#supa.db.model.Uuid.process_bind_param"><code class="docutils literal notranslate"><span class="pre">Uuid.process_bind_param()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#supa.db.model.Uuid.process_result_value"><code class="docutils literal notranslate"><span class="pre">Uuid.process_result_value()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#supa.db.model.ReprBase"><code class="docutils literal notranslate"><span class="pre">ReprBase</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#supa.db.model.UtcTimestampException"><code class="docutils literal notranslate"><span class="pre">UtcTimestampException</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#supa.db.model.UtcTimestamp"><code class="docutils literal notranslate"><span class="pre">UtcTimestamp</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#supa.db.model.UtcTimestamp.cache_ok"><code class="docutils literal notranslate"><span class="pre">UtcTimestamp.cache_ok</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#supa.db.model.UtcTimestamp.process_bind_param"><code class="docutils literal notranslate"><span class="pre">UtcTimestamp.process_bind_param()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#supa.db.model.UtcTimestamp.process_result_value"><code class="docutils literal notranslate"><span class="pre">UtcTimestamp.process_result_value()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#supa.db.model.Base"><code class="docutils literal notranslate"><span class="pre">Base</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#supa.db.model.Base.metadata"><code class="docutils literal notranslate"><span class="pre">Base.metadata</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#supa.db.model.Base.registry"><code class="docutils literal notranslate"><span class="pre">Base.registry</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#supa.db.model.Reservation"><code class="docutils literal notranslate"><span class="pre">Reservation</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#supa.db.model.Reservation.correlation_id"><code class="docutils literal notranslate"><span class="pre">Reservation.correlation_id</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#supa.db.model.Schedule"><code class="docutils literal notranslate"><span class="pre">Schedule</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#supa.db.model.P2PCriteria"><code class="docutils literal notranslate"><span class="pre">P2PCriteria</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#supa.db.model.P2PCriteria.src_stp"><code class="docutils literal notranslate"><span class="pre">P2PCriteria.src_stp()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#supa.db.model.P2PCriteria.dst_stp"><code class="docutils literal notranslate"><span class="pre">P2PCriteria.dst_stp()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#supa.db.model.PathTrace"><code class="docutils literal notranslate"><span class="pre">PathTrace</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#supa.db.model.Path"><code class="docutils literal notranslate"><span class="pre">Path</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#supa.db.model.Segment"><code class="docutils literal notranslate"><span class="pre">Segment</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#supa.db.model.Stp"><code class="docutils literal notranslate"><span class="pre">Stp</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#supa.db.model.Parameter"><code class="docutils literal notranslate"><span class="pre">Parameter</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#supa.db.model.Topology"><code class="docutils literal notranslate"><span class="pre">Topology</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#supa.db.model.Connection"><code class="docutils literal notranslate"><span class="pre">Connection</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#supa.db.model.connection_to_dict"><code class="docutils literal notranslate"><span class="pre">connection_to_dict()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#supa.db.model.Request"><code class="docutils literal notranslate"><span class="pre">Request</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#supa.db.model.Notification"><code class="docutils literal notranslate"><span class="pre">Notification</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#supa.db.model.Result"><code class="docutils literal notranslate"><span class="pre">Result</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#supa-job-shared">supa.job.shared</a></li>
<li class="toctree-l2"><a class="reference internal" href="#supa-job-reserve">supa.job.reserve</a></li>
<li class="toctree-l2"><a class="reference internal" href="#supa-job-provision">supa.job.provision</a></li>
<li class="toctree-l2"><a class="reference internal" href="#supa-job-lifecycle">supa.job.lifecycle</a></li>
<li class="toctree-l2"><a class="reference internal" href="#supa-job-query">supa.job.query</a></li>
<li class="toctree-l2"><a class="reference internal" href="#supa-job-dataplane">supa.job.dataplane</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-supa.connection.fsm">supa.connection.fsm</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#supa.connection.fsm.SuPAStateMachine"><code class="docutils literal notranslate"><span class="pre">SuPAStateMachine</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#supa.connection.fsm.SuPAStateMachine.on_enter_state"><code class="docutils literal notranslate"><span class="pre">SuPAStateMachine.on_enter_state()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#supa.connection.fsm.ReservationStateMachine"><code class="docutils literal notranslate"><span class="pre">ReservationStateMachine</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#supa.connection.fsm.ProvisionStateMachine"><code class="docutils literal notranslate"><span class="pre">ProvisionStateMachine</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#supa.connection.fsm.LifecycleStateMachine"><code class="docutils literal notranslate"><span class="pre">LifecycleStateMachine</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#supa.connection.fsm.DataPlaneStateMachine"><code class="docutils literal notranslate"><span class="pre">DataPlaneStateMachine</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-supa.connection.error">supa.connection.error</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#supa.connection.error.Variable"><code class="docutils literal notranslate"><span class="pre">Variable</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#supa.connection.error.NsiError"><code class="docutils literal notranslate"><span class="pre">NsiError</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#supa.connection.error.NsiError.error_id"><code class="docutils literal notranslate"><span class="pre">NsiError.error_id</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#supa.connection.error.NsiError.error_code"><code class="docutils literal notranslate"><span class="pre">NsiError.error_code</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#supa.connection.error.NsiError.descriptive_text"><code class="docutils literal notranslate"><span class="pre">NsiError.descriptive_text</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#supa-connection-requester">supa.connection.requester</a></li>
<li class="toctree-l2"><a class="reference internal" href="#supa-connection-provider-server">supa.connection.provider.server</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-supa.util.bandwidth">supa.util.bandwidth</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#supa.util.bandwidth.format_bandwidth"><code class="docutils literal notranslate"><span class="pre">format_bandwidth()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#supa-util-converter">supa.util.converter</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-supa.util.timestamp">supa.util.timestamp</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#supa.util.timestamp.EPOCH"><code class="docutils literal notranslate"><span class="pre">EPOCH</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#supa.util.timestamp.NO_END_DATE"><code class="docutils literal notranslate"><span class="pre">NO_END_DATE</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#supa.util.timestamp.current_timestamp"><code class="docutils literal notranslate"><span class="pre">current_timestamp()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#supa.util.timestamp.as_utc_timestamp"><code class="docutils literal notranslate"><span class="pre">as_utc_timestamp()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#supa.util.timestamp.is_specified"><code class="docutils literal notranslate"><span class="pre">is_specified()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-supa.util.nsi">supa.util.nsi</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#supa.util.nsi.URN_PREFIX"><code class="docutils literal notranslate"><span class="pre">URN_PREFIX</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#supa.util.nsi.Stp"><code class="docutils literal notranslate"><span class="pre">Stp</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#supa.util.nsi.Stp.vlan_ranges"><code class="docutils literal notranslate"><span class="pre">Stp.vlan_ranges</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#supa.util.nsi.parse_stp"><code class="docutils literal notranslate"><span class="pre">parse_stp()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#supa-util-vlan">supa.util.vlan</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#supa.util.vlan.VlanRanges"><code class="docutils literal notranslate"><span class="pre">VlanRanges</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#supa.util.vlan.VlanRanges.to_list_of_tuples"><code class="docutils literal notranslate"><span class="pre">VlanRanges.to_list_of_tuples()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#supa.util.vlan.VlanRanges.__contains__"><code class="docutils literal notranslate"><span class="pre">VlanRanges.__contains__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#supa.util.vlan.VlanRanges.__iter__"><code class="docutils literal notranslate"><span class="pre">VlanRanges.__iter__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#supa.util.vlan.VlanRanges.__len__"><code class="docutils literal notranslate"><span class="pre">VlanRanges.__len__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#supa.util.vlan.VlanRanges.__str__"><code class="docutils literal notranslate"><span class="pre">VlanRanges.__str__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#supa.util.vlan.VlanRanges.__repr__"><code class="docutils literal notranslate"><span class="pre">VlanRanges.__repr__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#supa.util.vlan.VlanRanges.__eq__"><code class="docutils literal notranslate"><span class="pre">VlanRanges.__eq__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#supa.util.vlan.VlanRanges.__hash__"><code class="docutils literal notranslate"><span class="pre">VlanRanges.__hash__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#supa.util.vlan.VlanRanges.__sub__"><code class="docutils literal notranslate"><span class="pre">VlanRanges.__sub__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#supa.util.vlan.VlanRanges.__and__"><code class="docutils literal notranslate"><span class="pre">VlanRanges.__and__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#supa.util.vlan.VlanRanges.__or__"><code class="docutils literal notranslate"><span class="pre">VlanRanges.__or__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#supa.util.vlan.VlanRanges.__xor__"><code class="docutils literal notranslate"><span class="pre">VlanRanges.__xor__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#supa.util.vlan.VlanRanges.isdisjoint"><code class="docutils literal notranslate"><span class="pre">VlanRanges.isdisjoint()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#supa.util.vlan.VlanRanges.union"><code class="docutils literal notranslate"><span class="pre">VlanRanges.union()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-supa.util.functional">supa.util.functional</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#supa.util.functional.expand_ranges"><code class="docutils literal notranslate"><span class="pre">expand_ranges()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#supa.util.functional.to_ranges"><code class="docutils literal notranslate"><span class="pre">to_ranges()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-supa.util.find">supa.util.find</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#supa.util.find.find_file"><code class="docutils literal notranslate"><span class="pre">find_file()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#supa.util.find.find_directory"><code class="docutils literal notranslate"><span class="pre">find_directory()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-supa.util.type">supa.util.type</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#supa.util.type.RequestType"><code class="docutils literal notranslate"><span class="pre">RequestType</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#supa.util.type.ResultType"><code class="docutils literal notranslate"><span class="pre">ResultType</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#supa.util.type.NotificationType"><code class="docutils literal notranslate"><span class="pre">NotificationType</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#supa-nrm-backend">supa.nrm.backend</a></li>
<li class="toctree-l2"><a class="reference internal" href="#supa-nrm-backends-example">supa.nrm.backends.example</a></li>
<li class="toctree-l2"><a class="reference internal" href="#supa-nrm-backends-surf">supa.nrm.backends.surf</a></li>
<li class="toctree-l2"><a class="reference internal" href="#supa-documents-discovery">supa.documents.discovery</a></li>
<li class="toctree-l2"><a class="reference internal" href="#supa-documents-topology">supa.documents.topology</a></li>
<li class="toctree-l2"><a class="reference internal" href="#supa-documents-healthcheck">supa.documents.healthcheck</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">SuPA</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">API</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/api.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="api">
<h1>API<a class="headerlink" href="#api" title="Link to this heading"></a></h1>
<section id="supa">
<h2>supa<a class="headerlink" href="#supa" title="Link to this heading"></a></h2>
</section>
<section id="supa-const">
<h2>supa.const<a class="headerlink" href="#supa-const" title="Link to this heading"></a></h2>
</section>
<section id="supa-main">
<h2>supa.main<a class="headerlink" href="#supa-main" title="Link to this heading"></a></h2>
</section>
<section id="supa-db-session">
<h2>supa.db.session<a class="headerlink" href="#supa-db-session" title="Link to this heading"></a></h2>
</section>
<section id="module-supa.db.model">
<span id="supa-db-model"></span><h2>supa.db.model<a class="headerlink" href="#module-supa.db.model" title="Link to this heading"></a></h2>
<p>Define the database models.</p>
<section id="surrogate-keys-versus-natural-keys">
<h3>Surrogate keys versus natural keys<a class="headerlink" href="#surrogate-keys-versus-natural-keys" title="Link to this heading"></a></h3>
<p>Looking at the model definitions
you’ll find that we have used <a class="reference external" href="https://en.wikipedia.org/wiki/Natural_key">natural keys</a> wherever possible.
Though no too common these days,
with the prevalent use of ORMs
that automatically generate a <a class="reference external" href="https://en.wikipedia.org/wiki/Surrogate_key">surrogate key</a> per model,
SQLAlchemy is flexible enough to model things ‘naturally’ from a relational database point of view.
This sometimes results in <a class="reference external" href="https://en.wikipedia.org/wiki/Compound_key">composite</a> primary keys.</p>
<p>Foreign keys to these composite primary keys cannot be defined on a specific Column definition
or even a set of Column definitions.
Something that does work for composite primary key definitions.
Instead,
these foreign keys need to be defined using a
<a class="reference external" href="https://docs.sqlalchemy.org/en/13/core/constraints.html?sqlalchemy.schema.ForeignKeyConstraint#sqlalchemy.schema.ForeignKeyConstraint">ForeignKeyConstraint</a>
on the <code class="docutils literal notranslate"><span class="pre">__table_args__</span></code> attribute of the DB model.</p>
</section>
<section id="connection-ids">
<h3>Connection IDs<a class="headerlink" href="#connection-ids" title="Link to this heading"></a></h3>
<p>Looking at example messages in the different specifications:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://www.ogf.org/documents/GFD.233.pdf">GFD-R-233 Applying Policy in the NSI Environment (pdf)</a></p></li>
<li><p><a class="reference external" href="https://www.ogf.org/documents/GFD.237.pdf">GWD-R-P.237 NSI Connection Service v2.1 (pdf)</a></p></li>
</ul>
<p>we see that connection IDs always seem to be formatted as <code class="docutils literal notranslate"><span class="pre">UUID</span></code>’s.
However, according to its definition in GWD-R-P.237,
it can be any string as long as it is unique within the context of a PA.
That is the reason that we have modelled connection IDs from other NSA’s
(<code class="docutils literal notranslate"><span class="pre">ag_connection_id</span></code>, <code class="docutils literal notranslate"><span class="pre">upa_connection_id</span></code>)
as <code class="docutils literal notranslate"><span class="pre">TEXT</span></code>.
Within SuPA we have decided to use <code class="docutils literal notranslate"><span class="pre">UUID</span></code>’s for our <code class="docutils literal notranslate"><span class="pre">connection_id</span></code>’s.</p>
</section>
<section id="sqlalchemy-model-dependency-diagram">
<h3>SQLAlchemy Model Dependency Diagram<a class="headerlink" href="#sqlalchemy-model-dependency-diagram" title="Link to this heading"></a></h3>
<p>A visual representation of how everything is wired together
should help navigating the Python code a lot better.</p>
<img alt="_images/sqlalchemy_model_dependency_diagram.png" src="_images/sqlalchemy_model_dependency_diagram.png" />
</section>
<dl class="py class">
<dt class="sig sig-object py" id="supa.db.model.Uuid">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">supa.db.model.</span></span><span class="sig-name descname"><span class="pre">Uuid</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#supa.db.model.Uuid" title="Link to this definition"></a></dt>
<dd><p>Implement SQLAlchemy Uuid column type for SQLite databases.</p>
<p>This stores Python <code class="xref py py-class docutils literal notranslate"><span class="pre">uuid.UUID</span></code> types as strings (<code class="docutils literal notranslate"><span class="pre">CHAR(36)</span></code>) in the database.
We have chosen to store the <code class="xref py py-meth docutils literal notranslate"><span class="pre">uuid.UUID.__str__()</span></code> representation directly,
eg. with <code class="docutils literal notranslate"><span class="pre">&quot;-&quot;</span></code> between the UUID fields,
for improved readability.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="supa.db.model.Uuid.cache_ok">
<span class="sig-name descname"><span class="pre">cache_ok</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">True</span></em><a class="headerlink" href="#supa.db.model.Uuid.cache_ok" title="Link to this definition"></a></dt>
<dd><p>Indicate if statements using this <code class="xref py py-class docutils literal notranslate"><span class="pre">ExternalType</span></code> are “safe to
cache”.</p>
<p>The default value <code class="docutils literal notranslate"><span class="pre">None</span></code> will emit a warning and then not allow caching
of a statement which includes this type.   Set to <code class="docutils literal notranslate"><span class="pre">False</span></code> to disable
statements using this type from being cached at all without a warning.
When set to <code class="docutils literal notranslate"><span class="pre">True</span></code>, the object’s class and selected elements from its
state will be used as part of the cache key.  For example, using a
<code class="xref py py-class docutils literal notranslate"><span class="pre">TypeDecorator</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">MyType</span><span class="p">(</span><span class="n">TypeDecorator</span><span class="p">):</span>
    <span class="n">impl</span> <span class="o">=</span> <span class="n">String</span>

    <span class="n">cache_ok</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">choices</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">choices</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">choices</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">internal_only</span> <span class="o">=</span> <span class="kc">True</span>
</pre></div>
</div>
<p>The cache key for the above type would be equivalent to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">MyType</span><span class="p">([</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">_static_cache_key</span>
<span class="go">(&lt;class &#39;__main__.MyType&#39;&gt;, (&#39;choices&#39;, (&#39;a&#39;, &#39;b&#39;, &#39;c&#39;)))</span>
</pre></div>
</div>
<p>The caching scheme will extract attributes from the type that correspond
to the names of parameters in the <code class="docutils literal notranslate"><span class="pre">__init__()</span></code> method.  Above, the
“choices” attribute becomes part of the cache key but “internal_only”
does not, because there is no parameter named “internal_only”.</p>
<p>The requirements for cacheable elements is that they are hashable
and also that they indicate the same SQL rendered for expressions using
this type every time for a given cache value.</p>
<p>To accommodate for datatypes that refer to unhashable structures such
as dictionaries, sets and lists, these objects can be made “cacheable”
by assigning hashable structures to the attributes whose names
correspond with the names of the arguments.  For example, a datatype
which accepts a dictionary of lookup values may publish this as a sorted
series of tuples.   Given a previously un-cacheable type as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">LookupType</span><span class="p">(</span><span class="n">UserDefinedType</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;a custom type that accepts a dictionary as a parameter.</span>

<span class="sd">    this is the non-cacheable version, as &quot;self.lookup&quot; is not</span>
<span class="sd">    hashable.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lookup</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lookup</span> <span class="o">=</span> <span class="n">lookup</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_col_spec</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;VARCHAR(255)&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">bind_processor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dialect</span><span class="p">):</span> <span class="o">...</span>  <span class="c1"># works with &quot;self.lookup&quot; ...</span>
</pre></div>
</div>
<p>Where “lookup” is a dictionary.  The type will not be able to generate
a cache key:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">type_</span> <span class="o">=</span> <span class="n">LookupType</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="mi">20</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">type_</span><span class="o">.</span><span class="n">_static_cache_key</span>
<span class="go">&lt;stdin&gt;:1: SAWarning: UserDefinedType LookupType({&#39;a&#39;: 10, &#39;b&#39;: 20}) will not</span>
<span class="go">produce a cache key because the ``cache_ok`` flag is not set to True.</span>
<span class="go">Set this flag to True if this type object&#39;s state is safe to use</span>
<span class="go">in a cache key, or False to disable this warning.</span>
<span class="go">symbol(&#39;no_cache&#39;)</span>
</pre></div>
</div>
<p>If we <strong>did</strong> set up such a cache key, it wouldn’t be usable. We would
get a tuple structure that contains a dictionary inside of it, which
cannot itself be used as a key in a “cache dictionary” such as SQLAlchemy’s
statement cache, since Python dictionaries aren’t hashable:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># set cache_ok = True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">type_</span><span class="o">.</span><span class="n">cache_ok</span> <span class="o">=</span> <span class="kc">True</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># this is the cache key it would generate</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">key</span> <span class="o">=</span> <span class="n">type_</span><span class="o">.</span><span class="n">_static_cache_key</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">key</span>
<span class="go">(&lt;class &#39;__main__.LookupType&#39;&gt;, (&#39;lookup&#39;, {&#39;a&#39;: 10, &#39;b&#39;: 20}))</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># however this key is not hashable, will fail when used with</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># SQLAlchemy statement cache</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">some_cache</span> <span class="o">=</span> <span class="p">{</span><span class="n">key</span><span class="p">:</span> <span class="s2">&quot;some sql value&quot;</span><span class="p">}</span>
<span class="go">Traceback (most recent call last): File &quot;&lt;stdin&gt;&quot;, line 1,</span>
<span class="go">in &lt;module&gt; TypeError: unhashable type: &#39;dict&#39;</span>
</pre></div>
</div>
<p>The type may be made cacheable by assigning a sorted tuple of tuples
to the “.lookup” attribute:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">LookupType</span><span class="p">(</span><span class="n">UserDefinedType</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;a custom type that accepts a dictionary as a parameter.</span>

<span class="sd">    The dictionary is stored both as itself in a private variable,</span>
<span class="sd">    and published in a public variable as a sorted tuple of tuples,</span>
<span class="sd">    which is hashable and will also return the same value for any</span>
<span class="sd">    two equivalent dictionaries.  Note it assumes the keys and</span>
<span class="sd">    values of the dictionary are themselves hashable.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">cache_ok</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lookup</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_lookup</span> <span class="o">=</span> <span class="n">lookup</span>

        <span class="c1"># assume keys/values of &quot;lookup&quot; are hashable; otherwise</span>
        <span class="c1"># they would also need to be converted in some way here</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lookup</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">((</span><span class="n">key</span><span class="p">,</span> <span class="n">lookup</span><span class="p">[</span><span class="n">key</span><span class="p">])</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">lookup</span><span class="p">))</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_col_spec</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;VARCHAR(255)&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">bind_processor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dialect</span><span class="p">):</span> <span class="o">...</span>  <span class="c1"># works with &quot;self._lookup&quot; ...</span>
</pre></div>
</div>
<p>Where above, the cache key for <code class="docutils literal notranslate"><span class="pre">LookupType({&quot;a&quot;:</span> <span class="pre">10,</span> <span class="pre">&quot;b&quot;:</span> <span class="pre">20})</span></code> will be:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">LookupType</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="mi">20</span><span class="p">})</span><span class="o">.</span><span class="n">_static_cache_key</span>
<span class="go">(&lt;class &#39;__main__.LookupType&#39;&gt;, (&#39;lookup&#39;, ((&#39;a&#39;, 10), (&#39;b&#39;, 20))))</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 1.4.14: </span>- added the <code class="docutils literal notranslate"><span class="pre">cache_ok</span></code> flag to allow
some configurability of caching for <code class="xref py py-class docutils literal notranslate"><span class="pre">TypeDecorator</span></code> classes.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 1.4.28: </span>- added the <code class="xref py py-class docutils literal notranslate"><span class="pre">ExternalType</span></code> mixin which
generalizes the <code class="docutils literal notranslate"><span class="pre">cache_ok</span></code> flag to both the <code class="xref py py-class docutils literal notranslate"><span class="pre">TypeDecorator</span></code>
and <code class="xref py py-class docutils literal notranslate"><span class="pre">UserDefinedType</span></code> classes.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><span class="xref std std-ref">sql_caching</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="supa.db.model.Uuid.process_bind_param">
<span class="sig-name descname"><span class="pre">process_bind_param</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">UUID</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dialect</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dialect</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#supa.db.model.Uuid.process_bind_param" title="Link to this definition"></a></dt>
<dd><p>Receive a bound parameter value to be converted.</p>
<p>Custom subclasses of <code class="xref py py-class docutils literal notranslate"><span class="pre">_types.TypeDecorator</span></code> should override
this method to provide custom behaviors for incoming data values.
This method is called at <strong>statement execution time</strong> and is passed
the literal Python data value which is to be associated with a bound
parameter in the statement.</p>
<p>The operation could be anything desired to perform custom
behavior, such as transforming or serializing data.
This could also be used as a hook for validating logic.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>value</strong> – Data to operate upon, of any type expected by
this method in the subclass.  Can be <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p><strong>dialect</strong> – the <code class="xref py py-class docutils literal notranslate"><span class="pre">Dialect</span></code> in use.</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><span class="xref std std-ref">types_typedecorator</span></p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">_types.TypeDecorator.process_result_value()</span></code></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="supa.db.model.Uuid.process_result_value">
<span class="sig-name descname"><span class="pre">process_result_value</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dialect</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dialect</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">UUID</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#supa.db.model.Uuid.process_result_value" title="Link to this definition"></a></dt>
<dd><p>Receive a result-row column value to be converted.</p>
<p>Custom subclasses of <code class="xref py py-class docutils literal notranslate"><span class="pre">_types.TypeDecorator</span></code> should override
this method to provide custom behaviors for data values
being received in result rows coming from the database.
This method is called at <strong>result fetching time</strong> and is passed
the literal Python data value that’s extracted from a database result
row.</p>
<p>The operation could be anything desired to perform custom
behavior, such as transforming or deserializing data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>value</strong> – Data to operate upon, of any type expected by
this method in the subclass.  Can be <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p><strong>dialect</strong> – the <code class="xref py py-class docutils literal notranslate"><span class="pre">Dialect</span></code> in use.</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><span class="xref std std-ref">types_typedecorator</span></p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">_types.TypeDecorator.process_bind_param()</span></code></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="supa.db.model.ReprBase">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">supa.db.model.</span></span><span class="sig-name descname"><span class="pre">ReprBase</span></span><a class="headerlink" href="#supa.db.model.ReprBase" title="Link to this definition"></a></dt>
<dd><p>Custom SQLAlchemy model to provide meaningful <code class="xref py py-meth docutils literal notranslate"><span class="pre">__str__()</span></code> and <code class="xref py py-meth docutils literal notranslate"><span class="pre">__repr__()</span></code> methods.</p>
<p>Writing appropriate <code class="docutils literal notranslate"><span class="pre">__repr__</span></code> and <code class="docutils literal notranslate"><span class="pre">__str__</span></code> methods
for all your SQLAlchemy ORM models
gets tedious very quickly.
By using SQLAlchemy’s
<a class="reference external" href="https://docs.sqlalchemy.org/en/latest/core/inspection.html?highlight=runtimeinspectionapi">Runtime Inspection API</a>
this base class can easily generate these methods for you.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This class cannot be used as a regular Python base class
due to assumptions made by <code class="docutils literal notranslate"><span class="pre">declarative_base</span></code>. See <strong>Usage</strong> below instead.</p>
</div>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Base</span> <span class="o">=</span> <span class="n">declarative_base</span><span class="p">(</span><span class="bp">cls</span><span class="o">=</span><span class="n">ReprBase</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="supa.db.model.UtcTimestampException">
<em class="property"><span class="k"><span class="pre">exception</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">supa.db.model.</span></span><span class="sig-name descname"><span class="pre">UtcTimestampException</span></span><a class="headerlink" href="#supa.db.model.UtcTimestampException" title="Link to this definition"></a></dt>
<dd><p>Exception class for custom UtcTimestamp SQLAlchemy column type.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="supa.db.model.UtcTimestamp">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">supa.db.model.</span></span><span class="sig-name descname"><span class="pre">UtcTimestamp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#supa.db.model.UtcTimestamp" title="Link to this definition"></a></dt>
<dd><p>Custom SQLAlchemy column type for storing timestamps in UTC in SQLite databases.</p>
<p>This column type always returns timestamps with the UTC timezone.
It also guards against accidentally trying to store Python naive timestamps
(those without a time zone).</p>
<p>In the SQLite database the timestamps are stored as strings of format: <code class="docutils literal notranslate"><span class="pre">yyyy-mm-dd</span> <span class="pre">hh:mm:ss</span></code>.
<strong>UTC is always implied.</strong></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="supa.db.model.UtcTimestamp.cache_ok">
<span class="sig-name descname"><span class="pre">cache_ok</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">True</span></em><a class="headerlink" href="#supa.db.model.UtcTimestamp.cache_ok" title="Link to this definition"></a></dt>
<dd><p>Indicate if statements using this <code class="xref py py-class docutils literal notranslate"><span class="pre">ExternalType</span></code> are “safe to
cache”.</p>
<p>The default value <code class="docutils literal notranslate"><span class="pre">None</span></code> will emit a warning and then not allow caching
of a statement which includes this type.   Set to <code class="docutils literal notranslate"><span class="pre">False</span></code> to disable
statements using this type from being cached at all without a warning.
When set to <code class="docutils literal notranslate"><span class="pre">True</span></code>, the object’s class and selected elements from its
state will be used as part of the cache key.  For example, using a
<code class="xref py py-class docutils literal notranslate"><span class="pre">TypeDecorator</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">MyType</span><span class="p">(</span><span class="n">TypeDecorator</span><span class="p">):</span>
    <span class="n">impl</span> <span class="o">=</span> <span class="n">String</span>

    <span class="n">cache_ok</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">choices</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">choices</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">choices</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">internal_only</span> <span class="o">=</span> <span class="kc">True</span>
</pre></div>
</div>
<p>The cache key for the above type would be equivalent to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">MyType</span><span class="p">([</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">_static_cache_key</span>
<span class="go">(&lt;class &#39;__main__.MyType&#39;&gt;, (&#39;choices&#39;, (&#39;a&#39;, &#39;b&#39;, &#39;c&#39;)))</span>
</pre></div>
</div>
<p>The caching scheme will extract attributes from the type that correspond
to the names of parameters in the <code class="docutils literal notranslate"><span class="pre">__init__()</span></code> method.  Above, the
“choices” attribute becomes part of the cache key but “internal_only”
does not, because there is no parameter named “internal_only”.</p>
<p>The requirements for cacheable elements is that they are hashable
and also that they indicate the same SQL rendered for expressions using
this type every time for a given cache value.</p>
<p>To accommodate for datatypes that refer to unhashable structures such
as dictionaries, sets and lists, these objects can be made “cacheable”
by assigning hashable structures to the attributes whose names
correspond with the names of the arguments.  For example, a datatype
which accepts a dictionary of lookup values may publish this as a sorted
series of tuples.   Given a previously un-cacheable type as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">LookupType</span><span class="p">(</span><span class="n">UserDefinedType</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;a custom type that accepts a dictionary as a parameter.</span>

<span class="sd">    this is the non-cacheable version, as &quot;self.lookup&quot; is not</span>
<span class="sd">    hashable.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lookup</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lookup</span> <span class="o">=</span> <span class="n">lookup</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_col_spec</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;VARCHAR(255)&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">bind_processor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dialect</span><span class="p">):</span> <span class="o">...</span>  <span class="c1"># works with &quot;self.lookup&quot; ...</span>
</pre></div>
</div>
<p>Where “lookup” is a dictionary.  The type will not be able to generate
a cache key:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">type_</span> <span class="o">=</span> <span class="n">LookupType</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="mi">20</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">type_</span><span class="o">.</span><span class="n">_static_cache_key</span>
<span class="go">&lt;stdin&gt;:1: SAWarning: UserDefinedType LookupType({&#39;a&#39;: 10, &#39;b&#39;: 20}) will not</span>
<span class="go">produce a cache key because the ``cache_ok`` flag is not set to True.</span>
<span class="go">Set this flag to True if this type object&#39;s state is safe to use</span>
<span class="go">in a cache key, or False to disable this warning.</span>
<span class="go">symbol(&#39;no_cache&#39;)</span>
</pre></div>
</div>
<p>If we <strong>did</strong> set up such a cache key, it wouldn’t be usable. We would
get a tuple structure that contains a dictionary inside of it, which
cannot itself be used as a key in a “cache dictionary” such as SQLAlchemy’s
statement cache, since Python dictionaries aren’t hashable:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># set cache_ok = True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">type_</span><span class="o">.</span><span class="n">cache_ok</span> <span class="o">=</span> <span class="kc">True</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># this is the cache key it would generate</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">key</span> <span class="o">=</span> <span class="n">type_</span><span class="o">.</span><span class="n">_static_cache_key</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">key</span>
<span class="go">(&lt;class &#39;__main__.LookupType&#39;&gt;, (&#39;lookup&#39;, {&#39;a&#39;: 10, &#39;b&#39;: 20}))</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># however this key is not hashable, will fail when used with</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># SQLAlchemy statement cache</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">some_cache</span> <span class="o">=</span> <span class="p">{</span><span class="n">key</span><span class="p">:</span> <span class="s2">&quot;some sql value&quot;</span><span class="p">}</span>
<span class="go">Traceback (most recent call last): File &quot;&lt;stdin&gt;&quot;, line 1,</span>
<span class="go">in &lt;module&gt; TypeError: unhashable type: &#39;dict&#39;</span>
</pre></div>
</div>
<p>The type may be made cacheable by assigning a sorted tuple of tuples
to the “.lookup” attribute:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">LookupType</span><span class="p">(</span><span class="n">UserDefinedType</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;a custom type that accepts a dictionary as a parameter.</span>

<span class="sd">    The dictionary is stored both as itself in a private variable,</span>
<span class="sd">    and published in a public variable as a sorted tuple of tuples,</span>
<span class="sd">    which is hashable and will also return the same value for any</span>
<span class="sd">    two equivalent dictionaries.  Note it assumes the keys and</span>
<span class="sd">    values of the dictionary are themselves hashable.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">cache_ok</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lookup</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_lookup</span> <span class="o">=</span> <span class="n">lookup</span>

        <span class="c1"># assume keys/values of &quot;lookup&quot; are hashable; otherwise</span>
        <span class="c1"># they would also need to be converted in some way here</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lookup</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">((</span><span class="n">key</span><span class="p">,</span> <span class="n">lookup</span><span class="p">[</span><span class="n">key</span><span class="p">])</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">lookup</span><span class="p">))</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_col_spec</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;VARCHAR(255)&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">bind_processor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dialect</span><span class="p">):</span> <span class="o">...</span>  <span class="c1"># works with &quot;self._lookup&quot; ...</span>
</pre></div>
</div>
<p>Where above, the cache key for <code class="docutils literal notranslate"><span class="pre">LookupType({&quot;a&quot;:</span> <span class="pre">10,</span> <span class="pre">&quot;b&quot;:</span> <span class="pre">20})</span></code> will be:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">LookupType</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="mi">20</span><span class="p">})</span><span class="o">.</span><span class="n">_static_cache_key</span>
<span class="go">(&lt;class &#39;__main__.LookupType&#39;&gt;, (&#39;lookup&#39;, ((&#39;a&#39;, 10), (&#39;b&#39;, 20))))</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 1.4.14: </span>- added the <code class="docutils literal notranslate"><span class="pre">cache_ok</span></code> flag to allow
some configurability of caching for <code class="xref py py-class docutils literal notranslate"><span class="pre">TypeDecorator</span></code> classes.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 1.4.28: </span>- added the <code class="xref py py-class docutils literal notranslate"><span class="pre">ExternalType</span></code> mixin which
generalizes the <code class="docutils literal notranslate"><span class="pre">cache_ok</span></code> flag to both the <code class="xref py py-class docutils literal notranslate"><span class="pre">TypeDecorator</span></code>
and <code class="xref py py-class docutils literal notranslate"><span class="pre">UserDefinedType</span></code> classes.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><span class="xref std std-ref">sql_caching</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="supa.db.model.UtcTimestamp.process_bind_param">
<span class="sig-name descname"><span class="pre">process_bind_param</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">datetime</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dialect</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dialect</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">datetime</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#supa.db.model.UtcTimestamp.process_bind_param" title="Link to this definition"></a></dt>
<dd><p>Receive a bound parameter value to be converted.</p>
<p>Custom subclasses of <code class="xref py py-class docutils literal notranslate"><span class="pre">_types.TypeDecorator</span></code> should override
this method to provide custom behaviors for incoming data values.
This method is called at <strong>statement execution time</strong> and is passed
the literal Python data value which is to be associated with a bound
parameter in the statement.</p>
<p>The operation could be anything desired to perform custom
behavior, such as transforming or serializing data.
This could also be used as a hook for validating logic.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>value</strong> – Data to operate upon, of any type expected by
this method in the subclass.  Can be <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p><strong>dialect</strong> – the <code class="xref py py-class docutils literal notranslate"><span class="pre">Dialect</span></code> in use.</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><span class="xref std std-ref">types_typedecorator</span></p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">_types.TypeDecorator.process_result_value()</span></code></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="supa.db.model.UtcTimestamp.process_result_value">
<span class="sig-name descname"><span class="pre">process_result_value</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">datetime</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dialect</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dialect</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">datetime</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#supa.db.model.UtcTimestamp.process_result_value" title="Link to this definition"></a></dt>
<dd><p>Receive a result-row column value to be converted.</p>
<p>Custom subclasses of <code class="xref py py-class docutils literal notranslate"><span class="pre">_types.TypeDecorator</span></code> should override
this method to provide custom behaviors for data values
being received in result rows coming from the database.
This method is called at <strong>result fetching time</strong> and is passed
the literal Python data value that’s extracted from a database result
row.</p>
<p>The operation could be anything desired to perform custom
behavior, such as transforming or deserializing data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>value</strong> – Data to operate upon, of any type expected by
this method in the subclass.  Can be <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p><strong>dialect</strong> – the <code class="xref py py-class docutils literal notranslate"><span class="pre">Dialect</span></code> in use.</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><span class="xref std std-ref">types_typedecorator</span></p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">_types.TypeDecorator.process_bind_param()</span></code></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="supa.db.model.Base">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">supa.db.model.</span></span><span class="sig-name descname"><span class="pre">Base</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#supa.db.model.Base" title="Link to this definition"></a></dt>
<dd><p>Base class used for declarative class definitions.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="supa.db.model.Base.metadata">
<span class="sig-name descname"><span class="pre">metadata</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">ClassVar</span><span class="p"><span class="pre">[</span></span><span class="pre">MetaData</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">MetaData()</span></em><a class="headerlink" href="#supa.db.model.Base.metadata" title="Link to this definition"></a></dt>
<dd><p>Refers to the <code class="xref py py-class docutils literal notranslate"><span class="pre">_schema.MetaData</span></code> collection that will be used
for new <code class="xref py py-class docutils literal notranslate"><span class="pre">_schema.Table</span></code> objects.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><span class="xref std std-ref">orm_declarative_metadata</span></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="supa.db.model.Base.registry">
<span class="sig-name descname"><span class="pre">registry</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">ClassVar</span><span class="p"><span class="pre">[</span></span><span class="pre">_RegistryType</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;sqlalchemy.orm.decl_api.registry</span> <span class="pre">object&gt;</span></em><a class="headerlink" href="#supa.db.model.Base.registry" title="Link to this definition"></a></dt>
<dd><p>Refers to the <code class="xref py py-class docutils literal notranslate"><span class="pre">_orm.registry</span></code> in use where new
<code class="xref py py-class docutils literal notranslate"><span class="pre">_orm.Mapper</span></code> objects will be associated.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="supa.db.model.Reservation">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">supa.db.model.</span></span><span class="sig-name descname"><span class="pre">Reservation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#supa.db.model.Reservation" title="Link to this definition"></a></dt>
<dd><p>DB mapping for registering NSI reservations.</p>
<dl class="py property">
<dt class="sig sig-object py" id="supa.db.model.Reservation.correlation_id">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">correlation_id</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">UUID</span></em><a class="headerlink" href="#supa.db.model.Reservation.correlation_id" title="Link to this definition"></a></dt>
<dd><p>Return correlation_id of the latest request for this connection_id.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="supa.db.model.Schedule">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">supa.db.model.</span></span><span class="sig-name descname"><span class="pre">Schedule</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#supa.db.model.Schedule" title="Link to this definition"></a></dt>
<dd><p>DB mapping for versioned schedules.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="supa.db.model.P2PCriteria">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">supa.db.model.</span></span><span class="sig-name descname"><span class="pre">P2PCriteria</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#supa.db.model.P2PCriteria" title="Link to this definition"></a></dt>
<dd><p>DB mapping for versioned P2P criteria.</p>
<dl class="py method">
<dt class="sig sig-object py" id="supa.db.model.P2PCriteria.src_stp">
<span class="sig-name descname"><span class="pre">src_stp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">selected</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#supa.util.nsi.Stp" title="supa.util.nsi.Stp"><span class="pre">Stp</span></a></span></span><a class="headerlink" href="#supa.db.model.P2PCriteria.src_stp" title="Link to this definition"></a></dt>
<dd><p>Return <code class="xref py py-class docutils literal notranslate"><span class="pre">STP</span></code> instance for src data.</p>
<p>Depending on where we are in the reservation process,
we need to deal with a requested VLAN(s)(ranges),
or a selected VLAN.
The <code class="docutils literal notranslate"><span class="pre">selected</span></code> parameter determines which of the two
will be used for the <code class="docutils literal notranslate"><span class="pre">labels</span></code> argument to the <a class="reference internal" href="#supa.util.nsi.Stp" title="supa.util.nsi.Stp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Stp</span></code></a> object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>selected</strong> – if True, use ‘selected VLAN` instead of requested VLAN(s)(ranges)</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#supa.util.nsi.Stp" title="supa.util.nsi.Stp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Stp</span></code></a> object</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="supa.db.model.P2PCriteria.dst_stp">
<span class="sig-name descname"><span class="pre">dst_stp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">selected</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#supa.util.nsi.Stp" title="supa.util.nsi.Stp"><span class="pre">Stp</span></a></span></span><a class="headerlink" href="#supa.db.model.P2PCriteria.dst_stp" title="Link to this definition"></a></dt>
<dd><p>Return <code class="xref py py-class docutils literal notranslate"><span class="pre">STP</span></code> instance for dst data.</p>
<p>Depending on where we are in the reservation process,
we need to deal with a requested VLAN(s)(ranges),
or a selected VLAN.
The <code class="docutils literal notranslate"><span class="pre">selected</span></code> parameter determines which of the two
will be used for the <code class="docutils literal notranslate"><span class="pre">labels</span></code> argument to the <a class="reference internal" href="#supa.util.nsi.Stp" title="supa.util.nsi.Stp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Stp</span></code></a> object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>selected</strong> – if True, use ‘selected VLAN` instead of requested VLAN(s)(ranges)</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#supa.util.nsi.Stp" title="supa.util.nsi.Stp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Stp</span></code></a> object</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="supa.db.model.PathTrace">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">supa.db.model.</span></span><span class="sig-name descname"><span class="pre">PathTrace</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#supa.db.model.PathTrace" title="Link to this definition"></a></dt>
<dd><p>DB mapping for PathTraces.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="supa.db.model.Path">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">supa.db.model.</span></span><span class="sig-name descname"><span class="pre">Path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#supa.db.model.Path" title="Link to this definition"></a></dt>
<dd><p>DB mapping for Paths.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="supa.db.model.Segment">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">supa.db.model.</span></span><span class="sig-name descname"><span class="pre">Segment</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#supa.db.model.Segment" title="Link to this definition"></a></dt>
<dd><p>DB mapping for Segment.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="supa.db.model.Stp">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">supa.db.model.</span></span><span class="sig-name descname"><span class="pre">Stp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#supa.db.model.Stp" title="Link to this definition"></a></dt>
<dd><p>DB Mapping for STP.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="supa.db.model.Parameter">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">supa.db.model.</span></span><span class="sig-name descname"><span class="pre">Parameter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#supa.db.model.Parameter" title="Link to this definition"></a></dt>
<dd><p>DB mapping for PointToPointService Parameters.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="supa.db.model.Topology">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">supa.db.model.</span></span><span class="sig-name descname"><span class="pre">Topology</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#supa.db.model.Topology" title="Link to this definition"></a></dt>
<dd><p>DB mapping for STP’s and ports in the topology from the NRM.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="supa.db.model.Connection">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">supa.db.model.</span></span><span class="sig-name descname"><span class="pre">Connection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#supa.db.model.Connection" title="Link to this definition"></a></dt>
<dd><p>DB mapping for registering connections to be build/built.</p>
<p>It stores references to the actual STP’s used in the connection as listed in :class`Topology`
and the <code class="docutils literal notranslate"><span class="pre">circuit_id</span></code> of the circuit in the NRM.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="supa.db.model.connection_to_dict">
<span class="sig-prename descclassname"><span class="pre">supa.db.model.</span></span><span class="sig-name descname"><span class="pre">connection_to_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">connection</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#supa.db.model.Connection" title="supa.db.model.Connection"><span class="pre">Connection</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#supa.db.model.connection_to_dict" title="Link to this definition"></a></dt>
<dd><p>Create a dict from a Connection.</p>
<p>A convenience function to create a dict that can be used as parameter list to all backend methods.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="supa.db.model.Request">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">supa.db.model.</span></span><span class="sig-name descname"><span class="pre">Request</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#supa.db.model.Request" title="Link to this definition"></a></dt>
<dd><p>DB mapping for registering async RA to PA request messages.</p>
<p>Store the async request from a requester agent to this provider agent.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="supa.db.model.Notification">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">supa.db.model.</span></span><span class="sig-name descname"><span class="pre">Notification</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#supa.db.model.Notification" title="Link to this definition"></a></dt>
<dd><p>DB mapping for registering notifications against a connection ID.</p>
<p>Store the notification for a connection ID serialized to string together
with a linearly increasing identifier that can be used for ordering notifications in
the context of the connection ID.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="supa.db.model.Result">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">supa.db.model.</span></span><span class="sig-name descname"><span class="pre">Result</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#supa.db.model.Result" title="Link to this definition"></a></dt>
<dd><p>DB mapping for registering results against a connection ID.</p>
<p>Store the async result to a provider request serialized to string together
with a linearly increasing identifier that can be used for ordering results in
the context of the connection ID. Results of requests from a RA to a PA
are stored so they can be retrieved later in case only synchronous communication
is possible between the RA and PA.</p>
</dd></dl>

</section>
<section id="supa-job-shared">
<h2>supa.job.shared<a class="headerlink" href="#supa-job-shared" title="Link to this heading"></a></h2>
</section>
<section id="supa-job-reserve">
<h2>supa.job.reserve<a class="headerlink" href="#supa-job-reserve" title="Link to this heading"></a></h2>
</section>
<section id="supa-job-provision">
<h2>supa.job.provision<a class="headerlink" href="#supa-job-provision" title="Link to this heading"></a></h2>
</section>
<section id="supa-job-lifecycle">
<h2>supa.job.lifecycle<a class="headerlink" href="#supa-job-lifecycle" title="Link to this heading"></a></h2>
</section>
<section id="supa-job-query">
<h2>supa.job.query<a class="headerlink" href="#supa-job-query" title="Link to this heading"></a></h2>
</section>
<section id="supa-job-dataplane">
<h2>supa.job.dataplane<a class="headerlink" href="#supa-job-dataplane" title="Link to this heading"></a></h2>
</section>
<section id="module-supa.connection.fsm">
<span id="supa-connection-fsm"></span><h2>supa.connection.fsm<a class="headerlink" href="#module-supa.connection.fsm" title="Link to this heading"></a></h2>
<p>Define the three NSI Connection Service state machines.</p>
<p>The NSI Connection Service defines three state machines that,
together with the message processing functions (=coordinator functions in NSI parlance),
model the behaviour of the protocol.</p>
<p>They are:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#supa.connection.fsm.ReservationStateMachine" title="supa.connection.fsm.ReservationStateMachine"><code class="xref py py-class docutils literal notranslate"><span class="pre">ReservationStateMachine</span></code></a> (RSM)</p></li>
<li><p><a class="reference internal" href="#supa.connection.fsm.ProvisionStateMachine" title="supa.connection.fsm.ProvisionStateMachine"><code class="xref py py-class docutils literal notranslate"><span class="pre">ProvisionStateMachine</span></code></a> (PSM)</p></li>
<li><p><a class="reference internal" href="#supa.connection.fsm.LifecycleStateMachine" title="supa.connection.fsm.LifecycleStateMachine"><code class="xref py py-class docutils literal notranslate"><span class="pre">LifecycleStateMachine</span></code></a> (LSM)</p></li>
</ul>
<p>The state machines explicitly regulate the sequence in which messages are processed.
The CS messages are each assigned to one of the three state machines:
RSM, PSM and LSM.
When the first reserve request for a new Connection is received,
the function processing the reserve requests MUST coordinate the creation of the
RSM, PSM and LSM
state machines for that specific connection.</p>
<p>The RSM and LSM MUST be instantiated as soon as the first Connection request is received.</p>
<p>The PSM MUST be instantiated as soon as the first version of the reservation is committed.</p>
<dl class="py class">
<dt class="sig sig-object py" id="supa.connection.fsm.SuPAStateMachine">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">supa.connection.fsm.</span></span><span class="sig-name descname"><span class="pre">SuPAStateMachine</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#supa.connection.fsm.SuPAStateMachine" title="Link to this definition"></a></dt>
<dd><p>Add logging capabilities to StateMachine.</p>
<dl class="py method">
<dt class="sig sig-object py" id="supa.connection.fsm.SuPAStateMachine.on_enter_state">
<span class="sig-name descname"><span class="pre">on_enter_state</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">state</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">State</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#supa.connection.fsm.SuPAStateMachine.on_enter_state" title="Link to this definition"></a></dt>
<dd><p>Statemachine will call this function on every state transition.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="supa.connection.fsm.ReservationStateMachine">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">supa.connection.fsm.</span></span><span class="sig-name descname"><span class="pre">ReservationStateMachine</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#supa.connection.fsm.ReservationStateMachine" title="Link to this definition"></a></dt>
<dd><p>Reservation State Machine.</p>
<img alt="_images/ReservationStateMachine.png" src="_images/ReservationStateMachine.png" />
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="supa.connection.fsm.ProvisionStateMachine">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">supa.connection.fsm.</span></span><span class="sig-name descname"><span class="pre">ProvisionStateMachine</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#supa.connection.fsm.ProvisionStateMachine" title="Link to this definition"></a></dt>
<dd><p>Provision State Machine.</p>
<img alt="_images/ProvisionStateMachine.png" src="_images/ProvisionStateMachine.png" />
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="supa.connection.fsm.LifecycleStateMachine">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">supa.connection.fsm.</span></span><span class="sig-name descname"><span class="pre">LifecycleStateMachine</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#supa.connection.fsm.LifecycleStateMachine" title="Link to this definition"></a></dt>
<dd><p>Lifecycle State Machine.</p>
<img alt="_images/LifecycleStateMachine.png" src="_images/LifecycleStateMachine.png" />
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="supa.connection.fsm.DataPlaneStateMachine">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">supa.connection.fsm.</span></span><span class="sig-name descname"><span class="pre">DataPlaneStateMachine</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#supa.connection.fsm.DataPlaneStateMachine" title="Link to this definition"></a></dt>
<dd><p>DataPlane State Machine.</p>
<img alt="_images/DataPlaneStateMachine.png" src="_images/DataPlaneStateMachine.png" />
</dd></dl>

</section>
<section id="module-supa.connection.error">
<span id="supa-connection-error"></span><h2>supa.connection.error<a class="headerlink" href="#module-supa.connection.error" title="Link to this heading"></a></h2>
<p>Predefined NSI errors.</p>
<p>The errors are not defined in the NSI Connection Service v2.1 specification.
Instead there is a separate document
<a class="reference external" href="https://www.ogf.org/documents/GFD.235.pdf">Error Handling in NSI CS 2.1</a>
that specifies these errors.</p>
<p>Not all errors might be applicable to SuPA’s operation,
it being a Provider Agent,
though all have been included for reference.</p>
<table class="docutils align-default" id="id2">
<caption><span class="caption-text">Predefined NSI errors</span><a class="headerlink" href="#id2" title="Link to this table"></a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p><code class="docutils literal notranslate"><span class="pre">error_id</span></code></p></th>
<th class="head"><p><code class="docutils literal notranslate"><span class="pre">error_code</span></code></p></th>
<th class="head"><p><code class="docutils literal notranslate"><span class="pre">descriptive_text</span></code></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>GenericMessagePayLoadError</p></td>
<td><p>00100</p></td>
<td><p>GENERIC_MESSAGE_PAYLOAD_ERROR</p></td>
<td><p>Illegal message payload.</p></td>
</tr>
<tr class="row-odd"><td><p>MissingParameter</p></td>
<td><p>00101</p></td>
<td><p>MISSING_PARAMETER</p></td>
<td><p>Invalid or missing parameter.</p></td>
</tr>
<tr class="row-even"><td><p>UnsupportedParameter</p></td>
<td><p>00102</p></td>
<td><p>UNSUPPORTED_PARAMETER</p></td>
<td><p>Provided parameter contains an unsupported value that MUST be processed.</p></td>
</tr>
<tr class="row-odd"><td><p>NotImplemented</p></td>
<td><p>00103</p></td>
<td><p>NOT_IMPLEMENTED</p></td>
<td><p>Requested feature has not been implemented.</p></td>
</tr>
<tr class="row-even"><td><p>VersionNotSupported</p></td>
<td><p>00104</p></td>
<td><p>VERSION_NOT_SUPPORTED</p></td>
<td><p>The protocol version requested is not supported.</p></td>
</tr>
<tr class="row-odd"><td><p>GenericConnectionError</p></td>
<td><p>00200</p></td>
<td><p>GENERIC_CONNECTION_ERROR</p></td>
<td><p>A connection error has occurred.</p></td>
</tr>
<tr class="row-even"><td><p>InvalidTransition</p></td>
<td><p>00201</p></td>
<td><p>INVALID_TRANSITION</p></td>
<td><p>Connection state machine is in invalid state for received message.</p></td>
</tr>
<tr class="row-odd"><td><p>ReservationNonExistent</p></td>
<td><p>00203</p></td>
<td><p>RESERVATION_NONEXISTENT</p></td>
<td><p>Schedule does not exist for connectionId.</p></td>
</tr>
<tr class="row-even"><td><p>GenericSecurityError</p></td>
<td><p>00300</p></td>
<td><p>GENERIC_SECURITY_ERROR</p></td>
<td><p>A security error has occurred.</p></td>
</tr>
<tr class="row-odd"><td><p>Unauthorized</p></td>
<td><p>00302</p></td>
<td><p>UNAUTHORIZED</p></td>
<td><p>Insufficient authorization to perform requested operation.</p></td>
</tr>
<tr class="row-even"><td><p>GenericMetadataError</p></td>
<td><p>00400</p></td>
<td><p>GENERIC_METADATA_ERROR</p></td>
<td><p>A topology or generic path computation error has occurred.</p></td>
</tr>
<tr class="row-odd"><td><p>DomainLookupError</p></td>
<td><p>00405</p></td>
<td><p>DOMAIN_LOOKUP_ERROR</p></td>
<td><p>Unknown network for requested resource.</p></td>
</tr>
<tr class="row-even"><td><p>NsaLookupError</p></td>
<td><p>00406</p></td>
<td><p>NSA_LOOKUP_ERROR</p></td>
<td><p>Cannot map networkId to service interface.</p></td>
</tr>
<tr class="row-odd"><td><p>NoServiceplanePathFound</p></td>
<td><p>00407</p></td>
<td><p>NO_SERVICEPLANE_PATH_FOUND</p></td>
<td><p>No service plane path for selected connection segments.</p></td>
</tr>
<tr class="row-even"><td><p>GenericInternalError</p></td>
<td><p>00500</p></td>
<td><p>GENERIC_INTERNAL_ERROR</p></td>
<td><p>An internal error has caused a message processing failure.</p></td>
</tr>
<tr class="row-odd"><td><p>ChildSegmentError</p></td>
<td><p>00502</p></td>
<td><p>CHILD_SEGMENT_ERROR</p></td>
<td><p>Child connection segment error is present.</p></td>
</tr>
<tr class="row-even"><td><p>MessageDeliveryError</p></td>
<td><p>00503</p></td>
<td><p>MESSAGE_DELIVERY_ERROR</p></td>
<td><p>Failed message delivery to peer NSA.</p></td>
</tr>
<tr class="row-odd"><td><p>GenericResourceUnavailable</p></td>
<td><p>00600</p></td>
<td><p>GENERIC_RESOURCE_UNAVAILABLE</p></td>
<td><p>A requested resource(s) is not available.</p></td>
</tr>
<tr class="row-even"><td><p>GenericServiceError</p></td>
<td><p>00700</p></td>
<td><p>GENERIC_SERVICE_ERROR</p></td>
<td><p>A service specific error has occurred.</p></td>
</tr>
<tr class="row-odd"><td><p>UnknownStp</p></td>
<td><p>00701</p></td>
<td><p>UNKNOWN_STP</p></td>
<td><p>Could not find STP in topology database.</p></td>
</tr>
<tr class="row-even"><td><p>LabelSwappingNotSupported</p></td>
<td><p>00703</p></td>
<td><p>LABEL_SWAPPING_NOT_SUPPORTED</p></td>
<td><p>Label swapping not supported for requested path.</p></td>
</tr>
<tr class="row-odd"><td><p>StpUnavailable</p></td>
<td><p>00704</p></td>
<td><p>STP_UNAVALABLE</p></td>
<td><p>Specified STP already in use.</p></td>
</tr>
<tr class="row-even"><td><p>CapacityUnavailable</p></td>
<td><p>00705</p></td>
<td><p>CAPACITY_UNAVAILABLE</p></td>
<td><p>Insufficient capacity available for reservation.</p></td>
</tr>
<tr class="row-odd"><td><p>DirectionalityMismatch</p></td>
<td><p>00706</p></td>
<td><p>DIRECTIONALITY_MISMATCH</p></td>
<td><p>Directionality of specified STP does not match request directionality.</p></td>
</tr>
<tr class="row-even"><td><p>InvalidEroMember</p></td>
<td><p>00707</p></td>
<td><p>INVALID_ERO_MEMBER</p></td>
<td><p>Invalid ERO member detected.</p></td>
</tr>
<tr class="row-odd"><td><p>UnknownLabelType</p></td>
<td><p>00708</p></td>
<td><p>UNKNOWN_LABEL_TYPE</p></td>
<td><p>Specified STP contains an unknown label type.</p></td>
</tr>
<tr class="row-even"><td><p>InvalidLabelFormat</p></td>
<td><p>00709</p></td>
<td><p>INVALID_LABEL_FORMAT</p></td>
<td><p>Specified STP contains an invalid label.</p></td>
</tr>
<tr class="row-odd"><td><p>NoTransportplanePathFound</p></td>
<td><p>00710</p></td>
<td><p>NO_TRANSPORTPLANE_PATH_FOUND</p></td>
<td><p>Path computation failed to resolve route for reservation.</p></td>
</tr>
<tr class="row-even"><td><p>GenericRmError</p></td>
<td><p>00800</p></td>
<td><p>GENERIC_RM_ERROR</p></td>
<td><p>An internal (N)RM error has caused a message processing failure.</p></td>
</tr>
</tbody>
</table>
<dl class="py class">
<dt class="sig sig-object py" id="supa.connection.error.Variable">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">supa.connection.error.</span></span><span class="sig-name descname"><span class="pre">Variable</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">values</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#supa.connection.error.Variable" title="Link to this definition"></a></dt>
<dd><p>Variable to namespace mapping.</p>
<p>This is a peculiarity of the original SOAP underpinning of the NSI protocol.
Even though all that is XML has largely been abstracted away from us
by using the Protobuf version of NSI,
we still need to track certain things
to facilitate a proper translation between the two protocol versions.
The namespace associated with each variable (in the <cite>ServiceException`</cite>) is such a thing.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="supa.connection.error.NsiError">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">supa.connection.error.</span></span><span class="sig-name descname"><span class="pre">NsiError</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">error_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">error_code</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">descriptive_text</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#supa.connection.error.NsiError" title="Link to this definition"></a></dt>
<dd><p>Predefined NSI errors.</p>
<p>Reporting of these errors happens as part of the <code class="docutils literal notranslate"><span class="pre">ServiceException</span></code> message.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">text</span></code> field of the <code class="docutils literal notranslate"><span class="pre">ServiceException</span></code> should be made up of three parts:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">error_code</span><span class="p">:</span> <span class="n">descriptive_text</span> <span class="p">[</span><span class="n">extra</span> <span class="n">information</span><span class="p">]</span>
</pre></div>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="supa.connection.error.NsiError.error_id">
<span class="sig-name descname"><span class="pre">error_id</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#supa.connection.error.NsiError.error_id" title="Link to this definition"></a></dt>
<dd><p>An unique ID for the error.</p>
<p>The <a class="reference internal" href="#supa.connection.error.NsiError.error_id" title="supa.connection.error.NsiError.error_id"><code class="xref py py-attr docutils literal notranslate"><span class="pre">error_id</span></code></a> can optionally be included in the <code class="docutils literal notranslate"><span class="pre">ServiceException</span></code>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="supa.connection.error.NsiError.error_code">
<span class="sig-name descname"><span class="pre">error_code</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#supa.connection.error.NsiError.error_code" title="Link to this definition"></a></dt>
<dd><p>Human readable name of the error.</p>
<p>The <a class="reference internal" href="#supa.connection.error.NsiError.error_code" title="supa.connection.error.NsiError.error_code"><code class="xref py py-attr docutils literal notranslate"><span class="pre">error_code</span></code></a> should always be included in the <code class="docutils literal notranslate"><span class="pre">ServiceException</span></code>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="supa.connection.error.NsiError.descriptive_text">
<span class="sig-name descname"><span class="pre">descriptive_text</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#supa.connection.error.NsiError.descriptive_text" title="Link to this definition"></a></dt>
<dd><p>Descriptive text explaining the error.</p>
<p>The <code class="xref py py-attr docutils literal notranslate"><span class="pre">text</span></code> should always be included in the <code class="docutils literal notranslate"><span class="pre">ServiceException</span></code>.</p>
</dd></dl>

</dd></dl>

</section>
<section id="supa-connection-requester">
<h2>supa.connection.requester<a class="headerlink" href="#supa-connection-requester" title="Link to this heading"></a></h2>
</section>
<section id="supa-connection-provider-server">
<h2>supa.connection.provider.server<a class="headerlink" href="#supa-connection-provider-server" title="Link to this heading"></a></h2>
</section>
<section id="module-supa.util.bandwidth">
<span id="supa-util-bandwidth"></span><h2>supa.util.bandwidth<a class="headerlink" href="#module-supa.util.bandwidth" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="supa.util.bandwidth.format_bandwidth">
<span class="sig-prename descclassname"><span class="pre">supa.util.bandwidth.</span></span><span class="sig-name descname"><span class="pre">format_bandwidth</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mbits</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">short</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="headerlink" href="#supa.util.bandwidth.format_bandwidth" title="Link to this definition"></a></dt>
<dd><p>Format bandwidth with unit designator (eg, Mbit/s or M).</p>
<ul class="simple">
<li><p>It supports units up to and including Petabit.</p></li>
<li><p>If it cannot convert the number to an integral one, it will allow for 1 decimal.</p></li>
<li><p>Negative bandwidths will always return 0 Mbit/s or 0 M</p></li>
</ul>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">format_bandwidth</span><span class="p">(</span><span class="mi">40</span><span class="p">)</span>
<span class="go">&#39;40 Mbit/s&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">format_bandwidth</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="n">short</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">&#39;40M&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">format_bandwidth</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span>
<span class="go">&#39;10 Gbit/s&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">format_bandwidth</span><span class="p">(</span><span class="mi">10000</span><span class="p">,</span> <span class="n">short</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">&#39;10G&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">format_bandwidth</span><span class="p">(</span><span class="mi">1300</span><span class="p">)</span>
<span class="go">&#39;1.3 Gbit/s&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">format_bandwidth</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="go">&#39;0 Mbit/s&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">format_bandwidth</span><span class="p">(</span><span class="o">-</span><span class="mi">100</span><span class="p">)</span>
<span class="go">&#39;0 Mbit/s&#39;</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mbits</strong> – number of mbits</p></li>
<li><p><strong>short</strong> – boolean indicating whether to use ‘M’, ‘G’ or ‘Mbit/s’ or ‘Gbit/s’, etc</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Formatted number with unit designator.</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="supa-util-converter">
<h2>supa.util.converter<a class="headerlink" href="#supa-util-converter" title="Link to this heading"></a></h2>
</section>
<section id="module-supa.util.timestamp">
<span id="supa-util-timestamp"></span><h2>supa.util.timestamp<a class="headerlink" href="#module-supa.util.timestamp" title="Link to this heading"></a></h2>
<p>Assorted helper functions and datastructures for dealing with timestamps.</p>
<dl class="py data">
<dt class="sig sig-object py" id="supa.util.timestamp.EPOCH">
<span class="sig-prename descclassname"><span class="pre">supa.util.timestamp.</span></span><span class="sig-name descname"><span class="pre">EPOCH</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">datetime.datetime(1970,</span> <span class="pre">1,</span> <span class="pre">1,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">tzinfo=datetime.timezone.utc)</span></em><a class="headerlink" href="#supa.util.timestamp.EPOCH" title="Link to this definition"></a></dt>
<dd><p>The epoch as an aware datetime object.</p>
<p>When using protobuf you can <strong>not</strong> distinguish between
no value specified
and the default value.
For Protobuf <code class="docutils literal notranslate"><span class="pre">Timestamp</span></code> fields the default value is 0 seconds since the epoch.
However we deal with <code class="xref py py-class docutils literal notranslate"><span class="pre">datetime</span></code> objects exclusively.
So we need the epoch as a <code class="xref py py-class docutils literal notranslate"><span class="pre">datetime</span></code> object.</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="supa.util.timestamp.NO_END_DATE">
<span class="sig-prename descclassname"><span class="pre">supa.util.timestamp.</span></span><span class="sig-name descname"><span class="pre">NO_END_DATE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">datetime.datetime(2108,</span> <span class="pre">1,</span> <span class="pre">1,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">tzinfo=datetime.timezone.utc)</span></em><a class="headerlink" href="#supa.util.timestamp.NO_END_DATE" title="Link to this definition"></a></dt>
<dd><p>A sufficiently far into the future date to be considered <em>no end date</em></p>
<p>Date/time calculations are easier when we have an actual date to work with.
Hence, to model “no end date” we need to come up with a date
that is far enough into the future to be considered “forever”.
Randomly picking a large number for the year of such a date feels inappropriate;
we can be a lot more geeky about it than that.</p>
<p>So, a somewhat geeky candidate is the first prime number after (the year) 2020.
That happens to be 2081;
61 years into the future.
Although we have high hopes for SuPA,
we don’t expect it to last that long.
As such, it does meet the criterion to be considered “forever”.
But the fact that it starts with “20xx
might not make it immediately obvious that this is the “no end date” date.</p>
<p>If we shuffle a bit with the digits of that prime number we get 2108.
A date that starts with “21xx” should make it sufficiently different
from all the other real end dates.
On top of that it is a somewhat a geeky date as well.
That is, if you like (military) SciFi
and have read The Frontlines Series by Marko Kloos,
which is set in the year 2108.
All criteria have now been met.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="supa.util.timestamp.current_timestamp">
<span class="sig-prename descclassname"><span class="pre">supa.util.timestamp.</span></span><span class="sig-name descname"><span class="pre">current_timestamp</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">datetime</span></span></span><a class="headerlink" href="#supa.util.timestamp.current_timestamp" title="Link to this definition"></a></dt>
<dd><p>Return an “aware” UTC timestamp for “now”.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>An “aware” UTC timestamp.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="supa.util.timestamp.as_utc_timestamp">
<span class="sig-prename descclassname"><span class="pre">supa.util.timestamp.</span></span><span class="sig-name descname"><span class="pre">as_utc_timestamp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timestamp</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Timestamp</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">datetime</span></span></span><a class="headerlink" href="#supa.util.timestamp.as_utc_timestamp" title="Link to this definition"></a></dt>
<dd><p>Convert Protobuf timestamp to an UTC datetime object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>timestamp</strong> – Protobuf timestamp</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>“aware” UTC datetime object</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="supa.util.timestamp.is_specified">
<span class="sig-prename descclassname"><span class="pre">supa.util.timestamp.</span></span><span class="sig-name descname"><span class="pre">is_specified</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timestamp</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">datetime</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="headerlink" href="#supa.util.timestamp.is_specified" title="Link to this definition"></a></dt>
<dd><p>Test to see if the timestamp is specified.</p>
<p>In the context of Protobuf Timestamps
we consider a timestamp
(previously converted to <code class="xref py py-class docutils literal notranslate"><span class="pre">datetime</span></code>)
to be “specified”
if it is larger than the default value for Timestamps.
That default value being <a class="reference internal" href="#supa.util.timestamp.EPOCH" title="supa.util.timestamp.EPOCH"><code class="xref py py-data docutils literal notranslate"><span class="pre">EPOCH</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>timestamp</strong> – timestamp under test.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True if <code class="docutils literal notranslate"><span class="pre">timestamp</span></code> &gt; EPOC</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-supa.util.nsi">
<span id="supa-util-nsi"></span><h2>supa.util.nsi<a class="headerlink" href="#module-supa.util.nsi" title="Link to this heading"></a></h2>
<p>NSI specific functions and datastructures.</p>
<dl class="py data">
<dt class="sig sig-object py" id="supa.util.nsi.URN_PREFIX">
<span class="sig-prename descclassname"><span class="pre">supa.util.nsi.</span></span><span class="sig-name descname"><span class="pre">URN_PREFIX</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'urn:ogf:network'</span></em><a class="headerlink" href="#supa.util.nsi.URN_PREFIX" title="Link to this definition"></a></dt>
<dd><p>URN namespace for Network Resources.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="supa.util.nsi.Stp">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">supa.util.nsi.</span></span><span class="sig-name descname"><span class="pre">Stp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">domain</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">topology</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stp_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">labels</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#supa.util.nsi.Stp" title="Link to this definition"></a></dt>
<dd><p>Dataclass for representing the constituent parts of an STP identifier.</p>
<dl class="py property">
<dt class="sig sig-object py" id="supa.util.nsi.Stp.vlan_ranges">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">vlan_ranges</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#supa.util.vlan.VlanRanges" title="supa.util.vlan.VlanRanges"><span class="pre">VlanRanges</span></a></em><a class="headerlink" href="#supa.util.nsi.Stp.vlan_ranges" title="Link to this definition"></a></dt>
<dd><p>Return the vlan ranges specified on the STP.</p>
<p>A single
If no vlan ranges where specified on the STP,
this will return an “empty” <a class="reference internal" href="#supa.util.vlan.VlanRanges" title="supa.util.vlan.VlanRanges"><code class="xref py py-class docutils literal notranslate"><span class="pre">VlanRanges</span></code></a> object.
Such an object will evaluate to False in a boolean context.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A <a class="reference internal" href="#supa.util.vlan.VlanRanges" title="supa.util.vlan.VlanRanges"><code class="xref py py-class docutils literal notranslate"><span class="pre">VlanRanges</span></code></a> object.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="supa.util.nsi.parse_stp">
<span class="sig-prename descclassname"><span class="pre">supa.util.nsi.</span></span><span class="sig-name descname"><span class="pre">parse_stp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stp</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#supa.util.nsi.Stp" title="supa.util.nsi.Stp"><span class="pre">Stp</span></a></span></span><a class="headerlink" href="#supa.util.nsi.parse_stp" title="Link to this definition"></a></dt>
<dd><p>Parse STP identifier in its constituent parts.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>stp</strong> – Identifier of the STP</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#supa.util.nsi.Stp" title="supa.util.nsi.Stp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Stp</span></code></a> dataclass</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>object</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="supa-util-vlan">
<h2>supa.util.vlan<a class="headerlink" href="#supa-util-vlan" title="Link to this heading"></a></h2>
<p id="module-supa.util.vlan">VlanRanges object for easy VLAN ranges processing.</p>
<dl class="py class">
<dt class="sig sig-object py" id="supa.util.vlan.VlanRanges">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">supa.util.vlan.</span></span><span class="sig-name descname"><span class="pre">VlanRanges</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">val</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#supa.util.vlan.VlanRanges" title="Link to this definition"></a></dt>
<dd><p>Represent VLAN ranges.</p>
<p>This class is quite liberal in what it accepts as valid VLAN ranges. All of:</p>
<ul class="simple">
<li><p>overlapping ranges</p></li>
<li><p>ranges with start value &gt; stop value</p></li>
<li><p>ranges with extraneous whitespace</p></li>
</ul>
<p>are all accepted and normalized to a canonical value.</p>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># These are all equivalent</span>
<span class="n">VlanRanges</span><span class="p">(</span><span class="s2">&quot;4,10-12,11-14&quot;</span><span class="p">)</span>
<span class="n">VlanRanges</span><span class="p">(</span><span class="s2">&quot;4,  ,11 - 14, 10-  12&quot;</span><span class="p">)</span>
<span class="n">VlanRanges</span><span class="p">(</span><span class="s2">&quot;4,10-14&quot;</span><span class="p">)</span>
<span class="n">VlanRanges</span><span class="p">([</span><span class="mi">4</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">14</span><span class="p">])</span>
<span class="n">VlanRanges</span><span class="p">([[</span><span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="mi">12</span><span class="p">],</span> <span class="p">[</span><span class="mi">11</span><span class="p">,</span><span class="mi">14</span><span class="p">]])</span>
<span class="n">VlanRanges</span><span class="p">([(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">14</span><span class="p">)])</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This class support most <code class="xref py py-class docutils literal notranslate"><span class="pre">set</span></code> operations.</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="supa.util.vlan.VlanRanges.to_list_of_tuples">
<span class="sig-name descname"><span class="pre">to_list_of_tuples</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#supa.util.vlan.VlanRanges.to_list_of_tuples" title="Link to this definition"></a></dt>
<dd><p>Construct list of tuples representing the VLAN ranges.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">VlanRanges</span><span class="p">(</span><span class="s2">&quot;10 - 12, 8&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">to_list_of_tuples</span><span class="p">()</span>
<span class="go">[(8, 8), (10, 12)]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The VLAN ranges as contained in this object.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="supa.util.vlan.VlanRanges.__contains__">
<span class="sig-name descname"><span class="pre">__contains__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="headerlink" href="#supa.util.vlan.VlanRanges.__contains__" title="Link to this definition"></a></dt>
<dd><p>Membership test.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="supa.util.vlan.VlanRanges.__iter__">
<span class="sig-name descname"><span class="pre">__iter__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterator</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#supa.util.vlan.VlanRanges.__iter__" title="Link to this definition"></a></dt>
<dd><p>Return an iterator that iterates over all the VLANs.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="supa.util.vlan.VlanRanges.__len__">
<span class="sig-name descname"><span class="pre">__len__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="headerlink" href="#supa.util.vlan.VlanRanges.__len__" title="Link to this definition"></a></dt>
<dd><p>Return the number of VLANs represented by this VlanRanges object.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Number of VLAN’s</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="supa.util.vlan.VlanRanges.__str__">
<span class="sig-name descname"><span class="pre">__str__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="headerlink" href="#supa.util.vlan.VlanRanges.__str__" title="Link to this definition"></a></dt>
<dd><p>Create an as compact as possible string representation of VLAN ranges.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">VlanRanges</span><span class="p">(</span><span class="s2">&quot;1,2,3,4,5-10,8&quot;</span><span class="p">))</span>
<span class="go">&#39;1-10&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="supa.util.vlan.VlanRanges.__repr__">
<span class="sig-name descname"><span class="pre">__repr__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="headerlink" href="#supa.util.vlan.VlanRanges.__repr__" title="Link to this definition"></a></dt>
<dd><p>Create string representation of the VLAN ranges that can be used as a valid Python expression.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">repr</span><span class="p">(</span><span class="n">VlanRanges</span><span class="p">(</span><span class="s2">&quot;1,2,3,4,5-10,8&quot;</span><span class="p">))</span>
<span class="go">&#39;VlanRanges([(1, 10)])&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="supa.util.vlan.VlanRanges.__eq__">
<span class="sig-name descname"><span class="pre">__eq__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">o</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="headerlink" href="#supa.util.vlan.VlanRanges.__eq__" title="Link to this definition"></a></dt>
<dd><p>Test for equality.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="supa.util.vlan.VlanRanges.__hash__">
<span class="sig-name descname"><span class="pre">__hash__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="headerlink" href="#supa.util.vlan.VlanRanges.__hash__" title="Link to this definition"></a></dt>
<dd><p>Calculate hash value.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="supa.util.vlan.VlanRanges.__sub__">
<span class="sig-name descname"><span class="pre">__sub__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">AbstractSet</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#supa.util.vlan.VlanRanges" title="supa.util.vlan.VlanRanges"><span class="pre">VlanRanges</span></a></span></span><a class="headerlink" href="#supa.util.vlan.VlanRanges.__sub__" title="Link to this definition"></a></dt>
<dd><p>Remove VLANs from left operand that are in the right operand.</p>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">VlanRanges</span><span class="p">(</span><span class="s2">&quot;1-10&quot;</span><span class="p">)</span> <span class="o">-</span> <span class="n">VlanRanges</span><span class="p">(</span><span class="s2">&quot;5-8&quot;</span><span class="p">)</span>
<span class="go">VlanRanges([(1, 4), (9, 10)])</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="supa.util.vlan.VlanRanges.__and__">
<span class="sig-name descname"><span class="pre">__and__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">AbstractSet</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#supa.util.vlan.VlanRanges" title="supa.util.vlan.VlanRanges"><span class="pre">VlanRanges</span></a></span></span><a class="headerlink" href="#supa.util.vlan.VlanRanges.__and__" title="Link to this definition"></a></dt>
<dd><p>Intersection of two VlanRanges objects.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">VlanRanges</span><span class="p">(</span><span class="s2">&quot;10-20&quot;</span><span class="p">)</span> <span class="o">&amp;</span> <span class="n">VlanRanges</span><span class="p">(</span><span class="s2">&quot;20-30&quot;</span><span class="p">)</span>
<span class="go">VlanRanges([(20, 20)])</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="supa.util.vlan.VlanRanges.__or__">
<span class="sig-name descname"><span class="pre">__or__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">AbstractSet</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#supa.util.vlan.VlanRanges" title="supa.util.vlan.VlanRanges"><span class="pre">VlanRanges</span></a></span></span><a class="headerlink" href="#supa.util.vlan.VlanRanges.__or__" title="Link to this definition"></a></dt>
<dd><p>Union of two VlanRanges objects.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">VlanRanges</span><span class="p">(</span><span class="s2">&quot;10-20&quot;</span><span class="p">)</span> <span class="o">|</span> <span class="n">VlanRanges</span><span class="p">(</span><span class="s2">&quot;20-30&quot;</span><span class="p">)</span>
<span class="go">VlanRanges([(10, 30)])</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="supa.util.vlan.VlanRanges.__xor__">
<span class="sig-name descname"><span class="pre">__xor__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">AbstractSet</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#supa.util.vlan.VlanRanges" title="supa.util.vlan.VlanRanges"><span class="pre">VlanRanges</span></a></span></span><a class="headerlink" href="#supa.util.vlan.VlanRanges.__xor__" title="Link to this definition"></a></dt>
<dd><p>Symmetric difference of two VlanRanges objects.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">VlanRanges</span><span class="p">(</span><span class="s2">&quot;10-20&quot;</span><span class="p">)</span> <span class="o">^</span> <span class="n">VlanRanges</span><span class="p">(</span><span class="s2">&quot;20-30&quot;</span><span class="p">)</span>
<span class="go">VlanRanges([(10, 19), (21, 30)])</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="supa.util.vlan.VlanRanges.isdisjoint">
<span class="sig-name descname"><span class="pre">isdisjoint</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="headerlink" href="#supa.util.vlan.VlanRanges.isdisjoint" title="Link to this definition"></a></dt>
<dd><p>Return True if the VlanRanges object has no VLANs in common with the other VlanRanges object.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="supa.util.vlan.VlanRanges.union">
<span class="sig-name descname"><span class="pre">union</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">others</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">AbstractSet</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#supa.util.vlan.VlanRanges" title="supa.util.vlan.VlanRanges"><span class="pre">VlanRanges</span></a></span></span><a class="headerlink" href="#supa.util.vlan.VlanRanges.union" title="Link to this definition"></a></dt>
<dd><p>Union of two or more VlanRanges objects.</p>
<p>This does work with sets as well.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">VlanRanges</span><span class="p">(</span><span class="s2">&quot;10-20&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="n">VlanRanges</span><span class="p">(</span><span class="s2">&quot;20-30&quot;</span><span class="p">),</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">})</span>
<span class="go">VlanRanges([(1, 4), (10, 30)])</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</section>
<section id="module-supa.util.functional">
<span id="supa-util-functional"></span><h2>supa.util.functional<a class="headerlink" href="#module-supa.util.functional" title="Link to this heading"></a></h2>
<p>Assorted helper functions for representing the same data in different ways.</p>
<dl class="py function">
<dt class="sig sig-object py" id="supa.util.functional.expand_ranges">
<span class="sig-prename descclassname"><span class="pre">supa.util.functional.</span></span><span class="sig-name descname"><span class="pre">expand_ranges</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ranges</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inclusive</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#supa.util.functional.expand_ranges" title="Link to this definition"></a></dt>
<dd><p>Expand sequence of range definitions into sorted and deduplicated list of individual values.</p>
<p>A range definition is either a:</p>
<ul class="simple">
<li><p>one element sequence -&gt; an individual value.</p></li>
<li><p>two element sequence -&gt; a range of values (either inclusive or exclusive).</p></li>
</ul>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">expand_ranges</span><span class="p">([[</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">12</span><span class="p">]])</span>
<span class="go">[1, 2, 10, 11]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expand_ranges</span><span class="p">([[</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">12</span><span class="p">]],</span> <span class="n">inclusive</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">[1, 2, 10, 11, 12]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expand_ranges</span><span class="p">([[]])</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="w">    </span><span class="o">...</span>
<span class="gr">ValueError</span>: <span class="n">Expected 1 or 2 element list for range definition. Got f0 element list instead.</span>
</pre></div>
</div>
<p>Resulting list is sorted:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">expand_ranges</span><span class="p">([[</span><span class="mi">100</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">]],</span> <span class="n">inclusive</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">[1, 2, 3, 4, 100]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ranges</strong> – sequence of range definitions</p></li>
<li><p><strong>inclusive</strong> – are the stop values of the range definition inclusive or exclusive.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Sorted deduplicated list of individual values.</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ValueError</strong> – if range definition is not a one or two element sequence.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="supa.util.functional.to_ranges">
<span class="sig-prename descclassname"><span class="pre">supa.util.functional.</span></span><span class="sig-name descname"><span class="pre">to_ranges</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">i</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">range</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#supa.util.functional.to_ranges" title="Link to this definition"></a></dt>
<dd><p>Convert a sorted iterable of ints to an iterable of range objects.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The iterable passed in should be sorted and not contain duplicate elements.</p>
</div>
<dl>
<dt>Examples::</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">to_ranges</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">45</span><span class="p">,</span> <span class="mi">46</span><span class="p">,</span> <span class="mi">47</span><span class="p">,</span> <span class="mi">49</span><span class="p">,</span> <span class="mi">51</span><span class="p">,</span> <span class="mi">53</span><span class="p">,</span> <span class="mi">54</span><span class="p">,</span> <span class="mi">55</span><span class="p">,</span> <span class="mi">56</span><span class="p">,</span> <span class="mi">57</span><span class="p">,</span> <span class="mi">58</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="mi">60</span><span class="p">,</span> <span class="mi">61</span><span class="p">]))</span>
<span class="go">[range(2, 6), range(7, 10), range(45, 48), range(49, 50), range(51, 52), range(53, 62)]</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>i</strong> – sorted iterable</p>
</dd>
<dt class="field-even">Yields<span class="colon">:</span></dt>
<dd class="field-even"><p>range object for each consecutive set of integers</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-supa.util.find">
<span id="supa-util-find"></span><h2>supa.util.find<a class="headerlink" href="#module-supa.util.find" title="Link to this heading"></a></h2>
<p>Utilities to find files and directories.</p>
<dl class="py function">
<dt class="sig sig-object py" id="supa.util.find.find_file">
<span class="sig-prename descclassname"><span class="pre">supa.util.find.</span></span><span class="sig-name descname"><span class="pre">find_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pathname</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Path</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Path</span></span></span><a class="headerlink" href="#supa.util.find.find_file" title="Link to this definition"></a></dt>
<dd><p>Find file ‘pathname’ along sys.path.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="supa.util.find.find_directory">
<span class="sig-prename descclassname"><span class="pre">supa.util.find.</span></span><span class="sig-name descname"><span class="pre">find_directory</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pathname</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Path</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Path</span></span></span><a class="headerlink" href="#supa.util.find.find_directory" title="Link to this definition"></a></dt>
<dd><p>Find directory ‘pathname’ along sys.path.</p>
</dd></dl>

</section>
<section id="module-supa.util.type">
<span id="supa-util-type"></span><h2>supa.util.type<a class="headerlink" href="#module-supa.util.type" title="Link to this heading"></a></h2>
<p>Handy types to keep things sane.</p>
<dl class="py class">
<dt class="sig sig-object py" id="supa.util.type.RequestType">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">supa.util.type.</span></span><span class="sig-name descname"><span class="pre">RequestType</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">values</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#supa.util.type.RequestType" title="Link to this definition"></a></dt>
<dd><p>Capture the set of valid request from RA to PA.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="supa.util.type.ResultType">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">supa.util.type.</span></span><span class="sig-name descname"><span class="pre">ResultType</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">values</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#supa.util.type.ResultType" title="Link to this definition"></a></dt>
<dd><p>Capture the set of valid results as returned by QueryResult.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="supa.util.type.NotificationType">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">supa.util.type.</span></span><span class="sig-name descname"><span class="pre">NotificationType</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">values</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#supa.util.type.NotificationType" title="Link to this definition"></a></dt>
<dd><p>Capture the set of valid notifications as returned by QueryNotification.</p>
</dd></dl>

</section>
<section id="supa-nrm-backend">
<span id="id1"></span><h2>supa.nrm.backend<a class="headerlink" href="#supa-nrm-backend" title="Link to this heading"></a></h2>
</section>
<section id="supa-nrm-backends-example">
<h2>supa.nrm.backends.example<a class="headerlink" href="#supa-nrm-backends-example" title="Link to this heading"></a></h2>
</section>
<section id="supa-nrm-backends-surf">
<h2>supa.nrm.backends.surf<a class="headerlink" href="#supa-nrm-backends-surf" title="Link to this heading"></a></h2>
</section>
<section id="supa-documents-discovery">
<h2>supa.documents.discovery<a class="headerlink" href="#supa-documents-discovery" title="Link to this heading"></a></h2>
</section>
<section id="supa-documents-topology">
<h2>supa.documents.topology<a class="headerlink" href="#supa-documents-topology" title="Link to this heading"></a></h2>
</section>
<section id="supa-documents-healthcheck">
<h2>supa.documents.healthcheck<a class="headerlink" href="#supa-documents-healthcheck" title="Link to this heading"></a></h2>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="changelog.html" class="btn btn-neutral float-left" title="Changelog" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, SURF.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>